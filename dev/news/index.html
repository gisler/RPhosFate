<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • RPhosFate</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RPhosFate</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.4.9005</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basicWorkflow.html">Basic modelling workflow</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Publications

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://doi.org/10.1016/j.jenvman.2022.114514" class="external-link">2022: Particulate PhozzyLogic Index (PPLI)</a>
    </li>
    <li>
      <a href="https://doi.org/10.3390/w11102161" class="external-link">2019: Storm drains at road embankments</a>
    </li>
    <li>
      <a href="https://doi.org/10.1016/j.scitotenv.2012.06.024" class="external-link">2012: Phosphorus emission hotspots</a>
    </li>
    <li>
      <a href="https://doi.org/10.2166/wst.2008.264" class="external-link">2008: Best management practice applications</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/gisler/RPhosFate/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/gisler/RPhosFate/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.4.9004" id="rphosfate-v1049004">RPhosFate v1.0.4.9004<a class="anchor" aria-label="anchor" href="#rphosfate-v1049004"></a></h2>
<p>This version introduces a new flow method, but also comes with several breaking changes.</p>
<div class="section level3">
<h3 id="overview-1-0-4-9004">Overview<a class="anchor" aria-label="anchor" href="#overview-1-0-4-9004"></a></h3>
<ul><li>Use of the D-infinity (Tarboton, <a href="https://doi.org/10.1029/96WR03137" class="external-link">1997</a>) instead of the D8 flow method, however, the D8 flow method can still be mimicked by rounding D-infinity flow directions to the nearest multiple of 45 degrees.</li>
<li>Weighted flow accumulations are no longer supported for the time being.</li>
<li>The basis for the calculation of the D-infinity slopes is the original digital elevation model and not the breached one with reversed stream burning as it used to be for the calculation of the D8 slopes.</li>
<li>The default value for the parameter holding the minimum bounding slope <em>(ns_slp_min)</em> is now 1 instead of 0.001%.</li>
<li>The L factor is now calculated using equation (9) as published by Desmet and Govers (<a href="https://www.jswconline.org/content/51/5/427" class="external-link">1996</a>) and not as modified by Kovacs (<a href="http://hdl.handle.net/20.500.12708/9468" class="external-link">2013</a>).</li>
<li>The channel retentions of the substance outlet loads of subsurface drainages are now calculated analogous to the overland retentions of the local emissions, i.e. by using half of the respective flow path length.</li>
<li>
<code>RPhosFate</code> now utilises the <code>terra</code> instead of the <code>raster</code> package.</li>
<li>Ceased the support for <em>ERDAS IMAGINE</em> (*.img) raster files and added <code><a href="../reference/img2tif.html">img2tif()</a></code> function can be used to convert all <em>ERDAS IMAGINE</em> raster files in a directory and its subdirectories into <em>GeoTIFF</em> raster files.</li>
<li>Dropped backward compatibility to major version zero.</li>
</ul></div>
<div class="section level3">
<h3 id="technical-details-1-0-4-9004">Technical details<a class="anchor" aria-label="anchor" href="#technical-details-1-0-4-9004"></a></h3>
<ul><li>Input data changes:
<ul><li>Removed the layers holding the (weighted) D8 flow accumulations (<em>acc</em> and <em>acc_wtd</em>) and added <em>acc_inf</em> holding the D-infinity flow accumulations.</li>
<li>Removed the layer holding the D8 flow directions <em>(dir)</em> and added <em>dir_inf</em> holding the D-infinity flow directions.</li>
<li>Removed the layer holding the D8 slopes <em>(slp)</em> and added <em>slp_inf</em> holding the D-infinity slopes.</li>
</ul></li>
<li>
<code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function changes:
<ul><li>Considerable adjustments to reflect the aforementioned input data changes.</li>
<li>Addition of <code>ns_cha</code> argument: allows for specifying the minimum D8 flow accumulation determining a channel.</li>
<li>Addition of <code>ls_mD8</code> argument: allows for mimicking D8 flow directions by rounding the D-infinity flow directions to the nearest multiple of 45 degrees. Please note that this treatment is always applied to channel cells independently of this argument.</li>
<li>Removal of the <code>cs_wgs</code> and <code>cs_dir</code> arguments: These input data are no longer supported for the time being.</li>
</ul></li>
<li>Switched to utilising the <code>SpatRaster</code> and <code>SpatVector</code> classes from the <code>terra</code> package instead of the <code>RasterLayer</code> class from the <code>raster</code> and the <code>Spatial*DataFrame</code> classes from the <code>sp</code> packages.</li>
<li>Added <code>is_ths</code> argument to the <code><a href="../reference/catchment.html">RPhosFate()</a></code> and <code><a href="../reference/catchment.html">catchment()</a></code> constructors: allows for specifying the number of threads to use for processing, where applicable.</li>
<li>Removed the layer holding the hydraulic radii <em>(rhy),</em> as the calculation of the hydraulic radii is now integrated into the <code><a href="../reference/transport-RPhosFate-method.html">transport()</a></code> method. This implies that the <code><a href="../reference/transportPrerequisites-RPhosFate-method.html">transportPrerequisites()</a></code> method does not save it to disk any longer.</li>
<li>Removed the parameter holding the D8 outflow direction vector <em>(iv_fDo).</em> Existing parameter files containing it can still be used, but the parameter will definitely be lost upon saving the project’s state.</li>
<li>Removed the <code>transportCalcOrder()</code> method, as the determination of the cell transport calculation order is now integrated into the <code><a href="../reference/transport-RPhosFate-method.html">transport()</a></code> method. This implies that the <code><a href="../reference/firstRun-RPhosFate-method.html">firstRun()</a></code> as well as <code><a href="../reference/subsequentRun-RPhosFate-method.html">subsequentRun()</a></code> methods do not call it and the <code><a href="../reference/saveState-RPhosFate-method.html">saveState()</a></code> method does not save it to disk any longer.</li>
<li>The <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method now returns its return value invisibly.</li>
<li>Considerably revised the internal <code>RPhosFateHelpers</code> class.</li>
<li>Removed <code>spatstat.geom</code> from the imported packages list (utilised functionality is now also provided by <code>terra</code>).</li>
<li>Bumped the minimum tested R version from 4.2.3 to 4.3.2 using the corresponding <em>Posit</em> public package manager snapshot.</li>
<li>Slightly improved the documentation.</li>
<li>Major internal code improvements.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.4" id="rphosfate-v104">RPhosFate v1.0.4<small>2023-10-07</small><a class="anchor" aria-label="anchor" href="#rphosfate-v104"></a></h2>
<ul><li>Removed <code>hydroGOF</code> from the imported packages list (<code>maptools</code> is retiring and <code>hydroGOF</code> depends on it via <code>hydroTSM</code>). Thanks to Roger Bivand for raising this issue (<a href="https://github.com/gisler/RPhosFate/issues/17" class="external-link">#17</a>).</li>
<li>Bumped the minimum tested R version from 4.2.2 to 4.2.3 using the corresponding <em>Posit</em> public package manager snapshot.</li>
<li>Slightly improved the documentation.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.3" id="rphosfate-v103">RPhosFate v1.0.3<small>2023-03-06</small><a class="anchor" aria-label="anchor" href="#rphosfate-v103"></a></h2>
<ul><li>Removed <code>rgdal</code> from the suggested packages list and set the minimum required version of the <code>raster</code> package to ≥ 3.6.3 (<code>rgdal</code> is retiring and <code>raster</code> ≥ 3.6.3 does not depend on it any longer). Thanks to Roger Bivand for raising this issue (<a href="https://github.com/gisler/RPhosFate/issues/17" class="external-link">#17</a>).</li>
<li>Bumped the minimum tested R version from 4.1.2 to 4.2.2 using the corresponding <em>MRAN</em> repository snapshot.</li>
<li>Slightly improved the documentation.</li>
<li>Minor internal code improvements.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.2" id="rphosfate-v102">RPhosFate v1.0.2<small>2022-09-21</small><a class="anchor" aria-label="anchor" href="#rphosfate-v102"></a></h2>
<ul><li>Removed <em>NRMSE</em> from calibration quality metrics and added <em>KGE</em> as well as <em>RCV.</em>
</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12.0" id="rphosfate-v0120">RPhosFate v0.12.0<a class="anchor" aria-label="anchor" href="#rphosfate-v0120"></a></h2>
<ul><li>Added <code><a href="../reference/autoCalibrate2-RPhosFate-method.html">autoCalibrate2()</a></code> method: allows for calibrating the overland and channel deposition rate in one go.</li>
<li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function can handle multiple catchment outlets now and so does the <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method.</li>
<li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function now returns the breached DEM with reversed stream burning if applicable instead of the original one.</li>
<li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function now calculates “correct” slopes even if the channels used for stream burning contain gaps.</li>
<li>
<code>RPhosFate</code> now makes sure that the x- and y-coordinates of gauges used for calibration lie within the extent of the river catchment object.</li>
<li>Renamed the <code>"inChannelRetention"</code> output of the <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method to <code>"inChannelRetentionRatio"</code>.</li>
<li>
<code>RPhosFate</code> requires R ≥ 3.5.0 now.</li>
<li>Improved the documentation.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11.0" id="rphosfate-v0110">RPhosFate v0.11.0<a class="anchor" aria-label="anchor" href="#rphosfate-v0110"></a></h2>
<ul><li>Monte Carlo simulation mode can now make use of repeated random samples, i.e. raster data, of distributions of about all input data.</li>
<li>Added the following arguments to the <code><a href="../reference/subsequentRun-RPhosFate-method.html">subsequentRun()</a></code> method, which allow for calling the respective methods:
<ul><li><code>erosionPrerequisites</code></li>
<li><code>erosion</code></li>
<li><code>emission</code></li>
<li><code>transportPrerequisites</code></li>
<li><code>transportCalcOrder</code></li>
</ul></li>
<li>Added <code>cv_MCl</code> argument to the <code><a href="../reference/catchment.html">RPhosFate()</a></code> and <code><a href="../reference/catchment.html">catchment()</a></code> constructors: allows for specifying the names of the layers, which shall be written to disk with the associated Monte Carlo iteration in their filenames upon calling the appropriate methods.</li>
<li>Initialising a project in Monte Carlo simulation mode now also reads model results produced by a possible earlier run associated with the specified iteration. This implies that Monte Carlo input data additionally can reside in the project root subdirectories and not only in a separate directory.</li>
<li>The plot produced by the <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method is now prettier.</li>
<li>Added a vignette describing the basic modelling workflow.</li>
<li>
<code>RPhosFate</code> now depends on the <code>spatstat.geom</code> instead of the <code>spatstat</code> package.</li>
<li>Fixed the minimum required version of the <code>whitebox</code> package (≥ 2.0.0).</li>
<li>Added test for the standard use case of the <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function.</li>
<li>Slightly improved the documentation.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.10.0" id="rphosfate-v0100">RPhosFate v0.10.0<a class="anchor" aria-label="anchor" href="#rphosfate-v0100"></a></h2>
<ul><li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function now calculates the slopes from the breached DEM (stream burning is undone beforehand).</li>
<li>Switched to utilising <em>GeoTIFF</em> (*.tif) instead of <em>ERDAS IMAGINE</em> (*.img) raster files.</li>
<li>Added <code>cs_fex</code> argument to the <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function: allows for using <em>ERDAS IMAGINE</em> raster files for backward compatibility.</li>
<li>Added <code>cs_dir</code> argument to the <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function: allows for utilising an existing D8 flow directions raster using <em>ArcGIS</em> codes.</li>
<li>Added <code><a href="../reference/demoProject.html">demoProject()</a></code> function providing training data.</li>
<li>Added examples to the documentation.</li>
<li>Fixed a backward incompatibility.</li>
<li>Added tests utilising the unit testing framework of the <code>tinytest</code> package.</li>
<li>Added means to measure code coverage with the help of <code>covr</code>.</li>
</ul></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gerold Hepp.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

