<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • RPhosFate</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Gelasio-0.4.10/font.css" rel="stylesheet"><link href="../deps/Raleway-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RPhosFate</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/basicWorkflow.html">Basic modelling workflow</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-publications" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Publications</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-publications"><li><a class="external-link dropdown-item" href="https://doi.org/10.1016/j.jenvman.2022.114514">2022: Particulate PhozzyLogic Index (PPLI)</a></li>
    <li><a class="external-link dropdown-item" href="https://doi.org/10.3390/w11102161">2019: Storm drains at road embankments</a></li>
    <li><a class="external-link dropdown-item" href="https://doi.org/10.1016/j.scitotenv.2012.06.024">2012: Phosphorus emission hotspots</a></li>
    <li><a class="external-link dropdown-item" href="https://doi.org/10.2166/wst.2008.264">2008: Best management practice applications</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gisler/RPhosFate/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/gisler/RPhosFate/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.1.9000" id="rphosfate-v2019000">RPhosFate v2.0.1.9000<a class="anchor" aria-label="anchor" href="#rphosfate-v2019000"></a></h2>
<ul><li>Updated the package’s <code>pkgdown</code> website to Bootstrap 5.</li>
<li>Minor internal code improvements, which require R ≥ 4.0.0.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="2.0.1" id="rphosfate-v201">RPhosFate v2.0.1<a class="anchor" aria-label="anchor" href="#rphosfate-v201"></a></h2><p class="text-muted">CRAN release: 2025-03-22</p>
<p>This version introduces a new flow method, but also comes with several breaking changes.</p>
<div class="section level3">
<h3 id="overview-2-0-1">Overview<a class="anchor" aria-label="anchor" href="#overview-2-0-1"></a></h3>
<ul><li>Use of the D-infinity (Tarboton, <a href="https://doi.org/10.1029/96WR03137" class="external-link">1997</a>) instead of the D8 flow method, however, the D8 flow method can still be mimicked by rounding D-infinity flow directions to the nearest multiple of 45 degrees.</li>
<li>Weighted flow accumulations are no longer supported for the time being.</li>
<li>The basis for the calculation of the D-infinity slopes is the original digital elevation model and not the breached one with reversed stream burning as it used to be for the calculation of the D8 slopes.</li>
<li>The default value for the parameter holding the minimum bounding slope <em>(ns_slp_min)</em> is now 1 instead of 0.001%.</li>
<li>The L factor is now calculated using equation (9) as published by Desmet and Govers (<a href="https://www.tandfonline.com/doi/abs/10.1080/00224561.1996.12457102" class="external-link">1996</a>) and not as modified by Kovacs (<a href="http://hdl.handle.net/20.500.12708/9468" class="external-link">2013</a>).</li>
<li>The channel retentions of the substance outlet loads of subsurface drainages are now calculated analogous to the overland retentions of the local emissions, i.e. by using half of the respective flow path length.</li>
<li>
<code>RPhosFate</code> now utilises the <code>terra</code> instead of the <code>raster</code> package.</li>
<li>Ceased the support for <em>ERDAS IMAGINE</em> (*.img) raster files and added <code><a href="../reference/img2tif.html">img2tif()</a></code> function, which can be used to convert all <em>ERDAS IMAGINE</em> raster files in a directory and its subdirectories into <em>GeoTIFF</em> raster files.</li>
<li>Dropped backward compatibility to major version zero.</li>
</ul></div>
<div class="section level3">
<h3 id="technical-details-2-0-1">Technical details<a class="anchor" aria-label="anchor" href="#technical-details-2-0-1"></a></h3>
<ul><li>Input data changes:
<ul><li>Removed the layers holding the (weighted) D8 flow accumulations (<em>acc</em> and <em>acc_wtd</em>) and added <em>acc_inf</em> holding the D-infinity flow accumulations.</li>
<li>Removed the layer holding the D8 flow directions <em>(dir)</em> and added <em>dir_inf</em> holding the D-infinity flow directions.</li>
<li>Removed the layer holding the D8 slopes <em>(slp)</em> and added <em>slp_inf</em> holding the D-infinity slopes.</li>
</ul></li>
<li>
<code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function changes:
<ul><li>Considerable adjustments to reflect the aforementioned input data changes.</li>
<li>Addition of <code>ns_cha</code> argument: allows for specifying the minimum D8 flow accumulation determining a channel.</li>
<li>Addition of <code>ls_mD8</code> argument: allows for mimicking D8 flow directions by rounding the D-infinity flow directions to the nearest multiple of 45 degrees. Please note that this treatment is always applied to channel cells independently of this argument.</li>
<li>Removal of the <code>cs_wgs</code> and <code>cs_dir</code> arguments: These input data are no longer supported for the time being.</li>
</ul></li>
<li>Switched to utilising the <code>SpatRaster</code> and <code>SpatVector</code> classes from the <code>terra</code> package instead of the <code>RasterLayer</code> class from the <code>raster</code> and the <code>Spatial*DataFrame</code> classes from the <code>sp</code> packages.</li>
<li>Added <code>is_ths</code> argument to the <code><a href="../reference/catchment.html">RPhosFate()</a></code> and <code><a href="../reference/catchment.html">catchment()</a></code> constructors: allows for specifying the number of threads to use for processing, where applicable.</li>
<li>Removed the layer holding the hydraulic radii <em>(rhy),</em> as the calculation of the hydraulic radii is now integrated into the <code><a href="../reference/transport-RPhosFate-method.html">transport()</a></code> method. This implies that the <code><a href="../reference/transportPrerequisites-RPhosFate-method.html">transportPrerequisites()</a></code> method does not save its result to disk any longer.</li>
<li>Removed the parameter holding the D8 outflow direction vector <em>(iv_fDo).</em> Existing parameter files containing it can still be used, but the parameter will definitely be lost upon saving the project’s state.</li>
<li>Removed the <code>transportCalcOrder()</code> method, as the determination of the cell transport calculation order is now integrated into the <code><a href="../reference/transport-RPhosFate-method.html">transport()</a></code> method. This implies that the <code><a href="../reference/firstRun-RPhosFate-method.html">firstRun()</a></code> as well as <code><a href="../reference/subsequentRun-RPhosFate-method.html">subsequentRun()</a></code> methods do not call it and the <code><a href="../reference/saveState-RPhosFate-method.html">saveState()</a></code> method does not save it to disk any longer.</li>
<li>The <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method now returns its return value invisibly.</li>
<li>Considerably revised the internal <code>RPhosFateHelpers</code> class.</li>
<li>Removed <code>spatstat.geom</code> from the imported packages list (utilised functionality is now also provided by <code>terra</code>).</li>
<li>Bumped the minimum tested R version from 4.2.3 to 4.3.2 using the corresponding <em>Posit</em> public package manager snapshot.</li>
<li>Slightly improved the documentation.</li>
<li>Major internal code improvements.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.4" id="rphosfate-v104">RPhosFate v1.0.4<a class="anchor" aria-label="anchor" href="#rphosfate-v104"></a></h2><p class="text-muted">CRAN release: 2023-10-07</p>
<ul><li>Removed <code>hydroGOF</code> from the imported packages list (<code>maptools</code> is retiring and <code>hydroGOF</code> depends on it via <code>hydroTSM</code>). Thanks to Roger Bivand for raising this issue (<a href="https://github.com/gisler/RPhosFate/issues/17" class="external-link">#17</a>).</li>
<li>Bumped the minimum tested R version from 4.2.2 to 4.2.3 using the corresponding <em>Posit</em> public package manager snapshot.</li>
<li>Slightly improved the documentation.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.3" id="rphosfate-v103">RPhosFate v1.0.3<a class="anchor" aria-label="anchor" href="#rphosfate-v103"></a></h2><p class="text-muted">CRAN release: 2023-03-06</p>
<ul><li>Removed <code>rgdal</code> from the suggested packages list and set the minimum required version of the <code>raster</code> package to ≥ 3.6.3 (<code>rgdal</code> is retiring and <code>raster</code> ≥ 3.6.3 does not depend on it any longer). Thanks to Roger Bivand for raising this issue (<a href="https://github.com/gisler/RPhosFate/issues/17" class="external-link">#17</a>).</li>
<li>Bumped the minimum tested R version from 4.1.2 to 4.2.2 using the corresponding <em>MRAN</em> repository snapshot.</li>
<li>Slightly improved the documentation.</li>
<li>Minor internal code improvements.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.2" id="rphosfate-v102">RPhosFate v1.0.2<a class="anchor" aria-label="anchor" href="#rphosfate-v102"></a></h2><p class="text-muted">CRAN release: 2022-09-21</p>
<ul><li>Removed <em>NRMSE</em> from calibration quality metrics and added <em>KGE</em> as well as <em>RCV.</em>
</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.12.0" id="rphosfate-v0120">RPhosFate v0.12.0<a class="anchor" aria-label="anchor" href="#rphosfate-v0120"></a></h2>
<ul><li>Added <code><a href="../reference/autoCalibrate2-RPhosFate-method.html">autoCalibrate2()</a></code> method: allows for calibrating the overland and channel deposition rate in one go.</li>
<li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function can handle multiple catchment outlets now and so does the <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method.</li>
<li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function now returns the breached DEM with reversed stream burning if applicable instead of the original one.</li>
<li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function now calculates “correct” slopes even if the channels used for stream burning contain gaps.</li>
<li>
<code>RPhosFate</code> now makes sure that the x- and y-coordinates of gauges used for calibration lie within the extent of the river catchment object.</li>
<li>Renamed the <code>"inChannelRetention"</code> output of the <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method to <code>"inChannelRetentionRatio"</code>.</li>
<li>
<code>RPhosFate</code> requires R ≥ 3.5.0 now.</li>
<li>Improved the documentation.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.11.0" id="rphosfate-v0110">RPhosFate v0.11.0<a class="anchor" aria-label="anchor" href="#rphosfate-v0110"></a></h2>
<ul><li>Monte Carlo simulation mode can now make use of repeated random samples, i.e. raster data, of distributions of about all input data.</li>
<li>Added the following arguments to the <code><a href="../reference/subsequentRun-RPhosFate-method.html">subsequentRun()</a></code> method, which allow for calling the respective methods:
<ul><li><code>erosionPrerequisites</code></li>
<li><code>erosion</code></li>
<li><code>emission</code></li>
<li><code>transportPrerequisites</code></li>
<li><code>transportCalcOrder</code></li>
</ul></li>
<li>Added <code>cv_MCl</code> argument to the <code><a href="../reference/catchment.html">RPhosFate()</a></code> and <code><a href="../reference/catchment.html">catchment()</a></code> constructors: allows for specifying the names of the layers, which shall be written to disk with the associated Monte Carlo iteration in their filenames upon calling the appropriate methods.</li>
<li>Initialising a project in Monte Carlo simulation mode now also reads model results produced by a possible earlier run associated with the specified iteration. This implies that Monte Carlo input data additionally can reside in the project root subdirectories and not only in a separate directory.</li>
<li>The plot produced by the <code><a href="../reference/calibrationQuality-RPhosFate-method.html">calibrationQuality()</a></code> method is now prettier.</li>
<li>Added a vignette describing the basic modelling workflow.</li>
<li>
<code>RPhosFate</code> now depends on the <code>spatstat.geom</code> instead of the <code>spatstat</code> package.</li>
<li>Fixed the minimum required version of the <code>whitebox</code> package (≥ 2.0.0).</li>
<li>Added test for the standard use case of the <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function.</li>
<li>Slightly improved the documentation.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.10.0" id="rphosfate-v0100">RPhosFate v0.10.0<a class="anchor" aria-label="anchor" href="#rphosfate-v0100"></a></h2>
<ul><li>The <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function now calculates the slopes from the breached DEM (stream burning is undone beforehand).</li>
<li>Switched to utilising <em>GeoTIFF</em> (*.tif) instead of <em>ERDAS IMAGINE</em> (*.img) raster files.</li>
<li>Added <code>cs_fex</code> argument to the <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function: allows for using <em>ERDAS IMAGINE</em> raster files for backward compatibility.</li>
<li>Added <code>cs_dir</code> argument to the <code><a href="../reference/DEMrelatedInput.html">DEMrelatedInput()</a></code> function: allows for utilising an existing D8 flow directions raster using <em>ArcGIS</em> codes.</li>
<li>Added <code><a href="../reference/demoProject.html">demoProject()</a></code> function providing training data.</li>
<li>Added examples to the documentation.</li>
<li>Fixed a backward incompatibility.</li>
<li>Added tests utilising the unit testing framework of the <code>tinytest</code> package.</li>
<li>Added means to measure code coverage with the help of <code>covr</code>.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gerold Hepp.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

