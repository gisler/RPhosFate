<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>DEM related input — DEMrelatedInput • RPhosFate</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="DEM related input — DEMrelatedInput"><meta property="og:description" content="Clips, pre-processes and calculates or determines all input data related to
the digital elevation model (DEM) in the broader sense: acc, acc_wtd,
cha, dem, dir, rds, slp, and wsh.
Requires TauDEM
5.3.7 and the
WhiteboxTools binary
(whitebox::install_whitebox) to be installed on your computer."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RPhosFate</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.12.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/basicWorkflow.html">Basic modelling workflow</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Publications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://doi.org/10.2166/wst.2008.264" class="external-link">2008: Best management practice applications</a>
    </li>
    <li>
      <a href="https://doi.org/10.1016/j.scitotenv.2012.06.024" class="external-link">2012: Phosphorus emission hotspots</a>
    </li>
    <li>
      <a href="https://doi.org/10.3390/w11102161" class="external-link">2019: Storm drains at road embankments</a>
    </li>
    <li>
      <a href="https://doi.org/10.1016/j.jenvman.2022.114514" class="external-link">2021: Particulate PhozzyLogic Index (PPLI)</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/gisler/RPhosFate/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>DEM related input</h1>
    <small class="dont-index">Source: <a href="https://github.com/gisler/RPhosFate/blob/HEAD/R/input.R" class="external-link"><code>R/input.R</code></a></small>
    <div class="hidden name"><code>DEMrelatedInput.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Clips, pre-processes and calculates or determines all input data related to
the digital elevation model (DEM) in the broader sense: <em>acc, acc_wtd,
cha, dem, dir, rds, slp,</em> and <em>wsh.</em></p>
<p>Requires <em><a href="http://hydrology.usu.edu/taudem/taudem5/downloads.html" class="external-link">TauDEM</a></em>
5.3.7 and the
<em><a href="https://www.whiteboxgeo.com/download-whiteboxtools/" class="external-link">WhiteboxTools</a></em> binary
(<code><a href="https://rdrr.io/pkg/whitebox/man/install_whitebox.html" class="external-link">whitebox::install_whitebox</a></code>) to be installed on your computer.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">DEMrelatedInput</span><span class="op">(</span>
  <span class="va">cv_dir</span>,
  <span class="va">cs_dem</span>,
  <span class="va">cs_cha</span>,
  <span class="va">sp_msk</span>,
  <span class="va">sp_olp</span>,
  <span class="va">sp_sds</span>,
  cs_rds <span class="op">=</span> <span class="cn">NULL</span>,
  cs_wgs <span class="op">=</span> <span class="cn">NULL</span>,
  cs_dir <span class="op">=</span> <span class="cn">NULL</span>,
  ns_brn <span class="op">=</span> <span class="fl">50</span>,
  is_adj <span class="op">=</span> <span class="fl">1L</span>,
  is_ths <span class="op">=</span> <span class="fl">1L</span>,
  ls_tmp <span class="op">=</span> <span class="cn">FALSE</span>,
  cs_fex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tif"</span>, <span class="st">"img"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>cv_dir</dt>
<dd><p>A character vector specifying the desired project root
directory (first position).</p></dd>


<dt>cs_dem</dt>
<dd><p>A character string specifying a path to a potentially large
raster digital elevation model.</p></dd>


<dt>cs_cha</dt>
<dd><p>A character string specifying a path to a potentially large
raster providing channels.</p></dd>


<dt>sp_msk</dt>
<dd><p>An <code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygonsDataFrame-class.html" class="external-link">sp::SpatialPolygonsDataFrame</a></code> providing a somewhat
oversized catchment mask used to clip the potentially large input rasters
for further processing.</p></dd>


<dt>sp_olp</dt>
<dd><p>An <code><a href="https://rdrr.io/pkg/sp/man/SpatialPointsDataFrame-class.html" class="external-link">sp::SpatialPointsDataFrame</a></code> providing the desired
catchment outlet(s).</p></dd>


<dt>sp_sds</dt>
<dd><p>An <code><a href="https://rdrr.io/pkg/sp/man/SpatialPointsDataFrame-class.html" class="external-link">sp::SpatialPointsDataFrame</a></code> providing channel
sources.</p></dd>


<dt>cs_rds</dt>
<dd><p>An optional character string specifying a path to a potentially
large raster providing roads.</p></dd>


<dt>cs_wgs</dt>
<dd><p>An optional character string specifying a path to a potentially
large raster providing flow accumulation weights.</p></dd>


<dt>cs_dir</dt>
<dd><p>An optional character string specifying a path to a potentially
large raster providing D8 flow directions using <em>ArcGIS</em> codes.</p></dd>


<dt>ns_brn</dt>
<dd><p>A numeric scalar specifying the stream burning step size in m.</p></dd>


<dt>is_adj</dt>
<dd><p>A numeric scalar specifying how many cells adjacent to channels
shall be burnt.</p></dd>


<dt>is_ths</dt>
<dd><p>An integer scalar specifying the number of threads to use
during computation (no effect in case <em>OpenMP</em> is not supported by the
toolchain and/or platform).</p></dd>


<dt>ls_tmp</dt>
<dd><p>A logical scalar specifying if the temporary files created
during computation shall be kept.</p></dd>


<dt>cs_fex</dt>
<dd><p>A character string specifying the file extension of the created
raster files (either the default <code>"tif"</code> or <code>"img"</code> for backward
compatibility).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A two column numeric <code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></code> specifying one or more catchment
outlet coordinates and side effects in the form of raster files.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function applies the following (pre-processing) steps to ensure
hydrologic consistency of the generated input data:</p><ul><li><p>Stream burning and orientation of cells adjacent to channel cells
approximately into the direction of channel cells (no effect with <code>ns_brn = 0</code>).</p></li>
<li><p>Depression breaching.</p></li>
<li><p>Tracing of downslope flowpaths from the provided channel sources.</p></li>
</ul><p>When roads are provided, they are considered as flow obstacles breaking the
continuity of the calculated flow accumulations.</p>
<p>In case no flow accumulation weights are provided, <em>acc</em> and <em>acc_wtd</em>
are identical.</p>
<p>Providing existing flow directions prevents calculating them, which, for
example, may be useful in case the effect of tillage directions has been
enforced on topographic flow directions in advance. Please note that doing so
renders stream burning and depression breaching without effect.</p>
<p><em>dem</em> represents the breached DEM with reversed stream burning if applicable.
This processed DEM also serves as the basis for the calculation of the D8
slopes provided by <em>slp.</em></p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p><cite>Lindsay, J.B., 2016. Efficient hybrid breaching-filling sink removal
methods for flow path enforcement in digital elevation models. Hydrological
Processes 30, 846–857.</cite></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="catchment.html">RPhosFate</a></code>, <code><a href="catchment.html">catchment</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># obtain temporary project root directory</span></span>
<span class="r-in"><span class="va">cv_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"cmt"</span><span class="op">)</span>,</span>
<span class="r-in">  winslash <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span>,</span>
<span class="r-in">  mustWork <span class="op">=</span> <span class="cn">FALSE</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="co"># obtain directory holding "large" rasters and other required data sets</span></span>
<span class="r-in"><span class="va">cs_dir_lrg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"tinytest"</span>, <span class="st">"largeData"</span>, package <span class="op">=</span> <span class="st">"RPhosFate"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">nm_olc</span> <span class="op">&lt;-</span> <span class="fu">DEMrelatedInput</span><span class="op">(</span></span>
<span class="r-in">  cv_dir <span class="op">=</span> <span class="va">cv_dir</span>,</span>
<span class="r-in">  cs_dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">cs_dir_lrg</span>, <span class="st">"dem_lrg.tif"</span><span class="op">)</span>,</span>
<span class="r-in">  cs_cha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">cs_dir_lrg</span>, <span class="st">"cha_lrg.tif"</span><span class="op">)</span>,</span>
<span class="r-in">  sp_msk <span class="op">=</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/shapefile.html" class="external-link">shapefile</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">cs_dir_lrg</span>, <span class="st">"msk.shp"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">  sp_olp <span class="op">=</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/shapefile.html" class="external-link">shapefile</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">cs_dir_lrg</span>, <span class="st">"olp.shp"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">  sp_sds <span class="op">=</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/shapefile.html" class="external-link">shapefile</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">cs_dir_lrg</span>, <span class="st">"sds.shp"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">  cs_rds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">cs_dir_lrg</span>, <span class="st">"rds_lrg.tif"</span><span class="op">)</span>,</span>
<span class="r-in">  cs_wgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">cs_dir_lrg</span>, <span class="st">"wgs_lrg.tif"</span><span class="op">)</span>,</span>
<span class="r-in">  ls_tmp <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gerold Hepp.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

